{% extends 'base.html' %}
{% block content %}
<div class="login-bg">
  <div class="login-split">
    <div class="login-split-left">
      <div class="login-big-title">
        <span class="teal">JOIN FINGUARD</span><br>
        <span class="gray">CREATE YOUR ACCOUNT</span>
      </div>
      <div class="login-desc">Sign up to unlock secure personal finance management and internet banking features.</div>
      <div class="login-reflect">FGUARD</div>
    </div>
    <div class="login-split-right">
      <div class="login-card">
        <div class="login-title">Create Account</div>
        <div class="login-subtitle">Start your journey with FinGuard. Fill in your details below.</div>
        <form method="POST" action="/register">
          <div class="row g-3">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="role" class="login-label">Register as</label>
                <select class="form-select" id="role" name="role" required>
                  <option value="">Choose...</option>
                  <option value="user">User</option>
                  <option value="agent">Agent</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="first_name" class="login-label">First Name</label>
                <input type="text" class="form-control" id="first_name" name="first_name" required>
              </div>
              <div class="mb-3">
                <label for="dob" class="login-label">Date of Birth</label>
                <input type="date" class="form-control" id="dob" name="dob" required>
              </div>
              <div class="mb-3">
                <label for="gender" class="login-label">Gender</label>
                <select class="form-select" id="gender" name="gender" required>
                  <option value="">Choose...</option>
                  <option value="M">Male</option>
                  <option value="F">Female</option>
                  <option value="O">Other</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="marital_status" class="login-label">Marital Status</label>
                <select class="form-select" id="marital_status" name="marital_status" required>
                  <option value="">Choose...</option>
                  <option value="Single">Single</option>
                  <option value="Married">Married</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="last_name" class="login-label">Last Name</label>
                <input type="text" class="form-control" id="last_name" name="last_name" required>
              </div>
              <div class="mb-3">
                <label for="blood_group" class="login-label">Blood Group</label>
                <select class="form-select" id="blood_group" name="blood_group" required>
                  <option value="">Choose...</option>
                  <option value="A+">A+</option>
                  <option value="A-">A-</option>
                  <option value="B+">B+</option>
                  <option value="B-">B-</option>
                  <option value="O+">O+</option>
                  <option value="O-">O-</option>
                  <option value="AB+">AB+</option>
                  <option value="AB-">AB-</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="email" class="login-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" required>
              </div>
              <div class="mb-3">
                <label for="phone" class="login-label">Phone</label>
                <input type="text" class="form-control" id="phone" name="phone" required>
              </div>
              <div class="mb-3">
                <label for="password" class="login-label">Password</label>
                <input type="password" class="form-control" id="password" name="password" required>
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary w-100">Register</button>
        </form>
        <div class="login-bottom-text">
          Already have an account?
          <a href="/login" class="login-link">Log In</a>
        </div>
        {% if error %}
        <div class="modal fade" id="registerErrorModal" tabindex="-1" aria-labelledby="registerErrorModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="registerErrorModalLabel">Registration Failed</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                {{ error }}
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <script>
          var errorModal = new bootstrap.Modal(document.getElementById('registerErrorModal'));
          errorModal.show();
        </script>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block extra_scripts %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
{% endblock %}
